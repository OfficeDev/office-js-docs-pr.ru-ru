# <a name="authentication-patterns"></a><span data-ttu-id="cc4c1-101">Шаблоны проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="cc4c1-101">Authentication patterns</span></span>

<span data-ttu-id="cc4c1-102">Чтобы получить доступ к функциям и инструментам надстроек, пользователям, возможно, придется зарегистрироваться или авторизоваться.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-102">Add-ins may require users to sign-in or sign-up in order to access features and functionality.</span></span> <span data-ttu-id="cc4c1-103">Поля ввода имени пользователя и пароля или кнопки, запускающие процессы сторонней авторизации, представляют собой общие элементы управления интерфейсом при проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-103">Input boxes for username and password or buttons that start third party credential flows are common interface controls in authentication experiences.</span></span> <span data-ttu-id="cc4c1-104">Простой и эффективный процесс проверки подлинности — важный первый шаг использования вашей надстройки пользователями.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-104">A simple and efficient authentication experience is an important first step to getting users started with your add-in.</span></span>

## <a name="best-practices"></a><span data-ttu-id="cc4c1-105">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="cc4c1-105">Best practices</span></span>

|<span data-ttu-id="cc4c1-106">Правильно</span><span class="sxs-lookup"><span data-stu-id="cc4c1-106">Do</span></span>|<span data-ttu-id="cc4c1-107">Неправильно</span><span class="sxs-lookup"><span data-stu-id="cc4c1-107">Don't</span></span>|
|:----|:----|
|<span data-ttu-id="cc4c1-108">Использовать проверку подлинности с единым входом (SSO) для аутентификации пользователей в вашей надстройке.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-108">Use single sign-on (SSO) to authenticate users into your add-in.</span></span>|<span data-ttu-id="cc4c1-109">Сделать обязательным отдельный вход в надстройку (пользователи должны авторизоваться отдельно, не используя свою личную учетную запись Microsoft или учетную запись Office 365 (на работе или учебе)).</span><span class="sxs-lookup"><span data-stu-id="cc4c1-109">Require users to sign into your add-in separately from their personal Microsoft account or their Office 365 account (work or school).</span></span>|
|<span data-ttu-id="cc4c1-110">Перед авторизацией описать важность надстройки или продемонстрировать ее функциональность, не требуя создания учетной записи.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-110">Prior to sign-in, describe the value of your add-in or demonstrate functionality without requiring an account.</span></span> |<span data-ttu-id="cc4c1-111">Быть готовым к тому, что пользователи будут авторизовываться, не понимая ценности и преимуществ надстройки.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-111">Expect users to sign-in without understanding the value and benefits of your add-in.</span></span>|
|<span data-ttu-id="cc4c1-112">Помогать пользователям пройти процесс аутентификации, разместив на каждом экране базовую, хорошо заметную кнопку.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-112">Guide users through authentication flows with a primary, highly visible button on each screen.</span></span> |<span data-ttu-id="cc4c1-113">Обращать внимание пользователей на второстепенные и третьестепенные задачи с помощью конкурирующих кнопок и кнопок с призывом к действию.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-113">Draw attention to secondary and tertiary tasks with competing buttons and calls to action.</span></span>|
|<span data-ttu-id="cc4c1-114">Использовать четкие ярлыки кнопок, описывающие конкретные задачи, например, «Войти» или «Создать учетную запись».</span><span class="sxs-lookup"><span data-stu-id="cc4c1-114">Use clear button labels that describe specific tasks like "Sign in" or "Create account".</span></span>   |<span data-ttu-id="cc4c1-115">Использовать неопределенные ярлыки кнопок, например, «Отправить» или «Начать», в процессе аутентификации пользователей.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-115">Use vague button labels like "Submit" or "Get started" to guide users through authentication flows.</span></span>|
|<span data-ttu-id="cc4c1-116">Использовать диалоговое окно, чтобы сосредоточить внимание пользователей на формах проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-116">Use a dialog to focus users' attention on authentication forms.</span></span>    |<span data-ttu-id="cc4c1-117">Перегрузить свою панель задач с помощью первого запуска и форм проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-117">Overcrowd your task pane with a first run experience and authentication forms.</span></span>|
|<span data-ttu-id="cc4c1-118">Найти небольшие элементы эффективности в процессе проверки подлинности, например, автоматическую фокусировку на полях ввода.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-118">Find small efficiencies in the flow like auto-focusing on input boxes.</span></span> |<span data-ttu-id="cc4c1-119">Добавить ненужные шаги в процесс взаимодействия, например, требование к пользователям нажимать на поля формы.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-119">Add unnecessary steps to the interaction like requiring users to click into form fields.</span></span>|
|<span data-ttu-id="cc4c1-120">Предоставить пользователям возможность выхода из системы и повторной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-120">Provide a way for users to sign-out and reauthenticate.</span></span>    |<span data-ttu-id="cc4c1-121">Заставить пользователей удалить надстройку, чтобы сменить пользователя.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-121">Force users to uninstall to switch identities.</span></span>|

> [!NOTE]
> <span data-ttu-id="cc4c1-122">В настоящее время API единого входа в предварительной версии поддерживается для Word, Excel, Outlook и PowerPoint.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-122">The Single Sign-on API is currently supported in preview for Word, Excel, Outlook, and PowerPoint.</span></span> <span data-ttu-id="cc4c1-123">Дополнительные сведения о текущей поддержке API единого входа см. в статье [Наборы обязательных элементов API идентификации](https://docs.microsoft.com/javascript/office/requirement-sets/identity-api-requirement-sets?view=office-js).</span><span class="sxs-lookup"><span data-stu-id="cc4c1-123">For more information about where the Single Sign-on API is currently supported, see [IdentityAPI requirement sets](https://docs.microsoft.com/javascript/office/requirement-sets/identity-api-requirement-sets?view=office-js).</span></span> <span data-ttu-id="cc4c1-124">Если вы работаете с надстройкой Outlook, обязательно включите современную проверку подлинности для клиента Office 365.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-124">If you are working with an Outlook add-in, be sure to enable Modern Authentication for the Office 365 tenancy.</span></span> <span data-ttu-id="cc4c1-125">Сведения о том, как это сделать, см. в статье [Exchange Online: как включить в клиенте современную проверку подлинности](https://social.technet.microsoft.com/wiki/contents/articles/32711.exchange-online-how-to-enable-your-tenant-for-modern-authentication.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc4c1-125">For information about how to do this, see [Exchange Online: How to enable your tenant for modern authentication](https://social.technet.microsoft.com/wiki/contents/articles/32711.exchange-online-how-to-enable-your-tenant-for-modern-authentication.aspx).</span></span>


## <a name="authentication-flow"></a><span data-ttu-id="cc4c1-126">Поток проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="cc4c1-126">Authentication flow</span></span>
<span data-ttu-id="cc4c1-127">Если единый вход еще не доступен вашим пользователям, рассмотрите возможность использования альтернативного процесса проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-127">If single sign-on is not yet available to your users, consider an alternative authentication flow.</span></span> <span data-ttu-id="cc4c1-128">Дайте пользователям возможность входа в систему напрямую с помощью вашей службы или поставщика идентификатора, например, Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-128">Give users a choice to sign-in directly with your service or an identity provider like Microsoft.</span></span>

1. <span data-ttu-id="cc4c1-129">Представление первого запуска — Разместите свою кнопку входа в систему в виде четкой кнопки-призыва к действию в первом запуске надстройки.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-129">First Run Placemat - Place your sign-in button as a clear call-to action inside your add-in's first run experience.</span></span>
![](../images/add-in-fre-value-placemat.png)

2. <span data-ttu-id="cc4c1-130">Диалоговое окно выбора поставщика идентификатора — Отобразите список поставщиков идентификационных данных, включая имя пользователя и пароль, если это применимо.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-130">Identity Provider Choices Dialog - Display a clear list of identity providers including a username and password form if applicable.</span></span> <span data-ttu-id="cc4c1-131">Пользовательский интерфейс вашей надстройки может быть заблокирован, если открыто диалоговое окно проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-131">Your add-in UI may be blocked while the authentication dialog is open.</span></span>
![](../images/add-in-auth-choices-dialog.png)



3. <span data-ttu-id="cc4c1-132">Вход поставщика идентификатора — У поставщика идентификатора будет собственный интерфейс.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-132">Identity Provider Sign-in - The identity provider will have their own UI.</span></span> <span data-ttu-id="cc4c1-133">Microsoft Azure Active Directory позволяет настраивать страницы входа и панели доступа для обеспечения неизменного соответствия вашей службе.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-133">Microsoft Azure Active Directory allows customization of sign-in and access panel pages for consistent look and feel with your service.</span></span> <span data-ttu-id="cc4c1-134">[Узнать больше](https://docs.microsoft.com/azure/active-directory/fundamentals/customize-branding).</span><span class="sxs-lookup"><span data-stu-id="cc4c1-134">Learn more</span></span>
![](../images/add-in-auth-identity-sign-in.png)

4. <span data-ttu-id="cc4c1-135">Ход выполнения — Указывает ход выполнения загрузки настроек и пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-135">Progress - Indicate progress while settings and UI load.</span></span>
![](../images/add-in-auth-modal-interstitial.png)

> [!NOTE] 
> <span data-ttu-id="cc4c1-136">При использовании службы идентификации Microsoft у вас будет возможность использовать фирменную кнопку входа, цвет которой можно настроить (светлый или темный).</span><span class="sxs-lookup"><span data-stu-id="cc4c1-136">When using Microsoft's Identity service you'll have the opportunity to use a branded sign-in button that is customizable to light and dark themes.</span></span> <span data-ttu-id="cc4c1-137">Подробнее.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-137">Learn more.</span></span>

## <a name="single-sign-on-authentication-flow"></a><span data-ttu-id="cc4c1-138">Процесс проверки подлинности с единым входом</span><span class="sxs-lookup"><span data-stu-id="cc4c1-138">Single Sign-On authentication flow</span></span>
<span data-ttu-id="cc4c1-139">Проверка подлинности с единым входом все еще находится в режиме предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-139">Single sign-on is still in preview.</span></span> <span data-ttu-id="cc4c1-140">Когда эта модель станет доступна в стандартном режиме, используйте ее для обеспечения максимального удобства пользователей.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-140">Once generally available, use it for the smoothest end-user experience.</span></span> <span data-ttu-id="cc4c1-141">Для входа в вашу надстройку используется идентификатор пользователя в Office.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-141">The user's identity within Office is used to sign-in to your add-in.</span></span> <span data-ttu-id="cc4c1-142">Как следствие, пользователи проходят авторизацию только один раз.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-142">As a result users only sign-in once.</span></span> <span data-ttu-id="cc4c1-143">Это устраняет неудобства и облегчает работу ваших клиентов.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-143">This removes friction in the experience making it easier for your customers to get started.</span></span>

1. <span data-ttu-id="cc4c1-144">Когда надстройка будет установлена, пользователь увидит окно согласия, похожее на показанное ниже: ![](../images/add-in-auth-SSO-consent-dialog.png)</span><span class="sxs-lookup"><span data-stu-id="cc4c1-144">As an add-in is being installed, a user will see a consent window similar to the one below: ![](../images/add-in-auth-SSO-consent-dialog.png)</span></span>
> [!NOTE]
> <span data-ttu-id="cc4c1-145">Издатель надстройки будет иметь контроль над логотипом, программными строками и областями разрешений, включенными в окно согласия.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-145">The add-in publisher will have control over the logo, strings and permission scopes included in the consent window.</span></span> <span data-ttu-id="cc4c1-146">Пользовательский интерфейс предварительно настроен Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-146">The UI is pre-configured by Microsoft.</span></span>

2. <span data-ttu-id="cc4c1-147">Надстройка загрузится после того, как пользователь согласится.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-147">The add-in will load after the user consents.</span></span> <span data-ttu-id="cc4c1-148">Она сможет извлекать и отображать любую необходимую пользовательскую информацию.</span><span class="sxs-lookup"><span data-stu-id="cc4c1-148">It can extract and display any necessary user customized information.</span></span>
![](../images/add-in-ribbon.png)

## <a name="see-also"></a><span data-ttu-id="cc4c1-149">См. также</span><span class="sxs-lookup"><span data-stu-id="cc4c1-149">See also</span></span>
- <span data-ttu-id="cc4c1-150">Узнайте больше о [разработке надстроек SSO](https://docs.microsoft.com/office/dev/add-ins/develop/sso-in-office-add-ins)</span><span class="sxs-lookup"><span data-stu-id="cc4c1-150">Learn more about [developing SSO Add-ins](https://docs.microsoft.com/office/dev/add-ins/develop/sso-in-office-add-ins)</span></span>